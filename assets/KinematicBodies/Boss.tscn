[gd_scene load_steps=64 format=2]

[ext_resource path="res://scripts/state_machines/BossColorState.gd" type="Script" id=1]
[ext_resource path="res://scripts/state_machines/BossStateMachine.gd" type="Script" id=2]
[ext_resource path="res://scripts/kinematicBodies/Boss.gd" type="Script" id=3]
[ext_resource path="res://assets/entities/bossfight/FinalBossSpriteSheet.png" type="Texture" id=4]

[sub_resource type="CircleShape2D" id=60]
radius = 35.0

[sub_resource type="CircleShape2D" id=2]
radius = 552.058

[sub_resource type="CircleShape2D" id=61]
radius = 40.0

[sub_resource type="Animation" id=4]
resource_name = "blue_primary_begin"
length = 0.9
step = 0.12
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.12, 0.24, 0.36, 0.48, 0.6, 0.72, 0.84 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 122, 123, 124, 125, 126, 127, 128, 129 ]
}

[sub_resource type="Animation" id=5]
resource_name = "blue_primary_end"
length = 0.68
step = 0.12
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.12, 0.24, 0.36, 0.48, 0.6 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 138, 139, 140, 141, 142, 143 ]
}

[sub_resource type="Animation" id=6]
resource_name = "blue_primary_loop"
length = 0.55
loop = true
step = 0.12
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.12, 0.24, 0.36, 0.48 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 134, 135, 136, 137, 138 ]
}

[sub_resource type="Animation" id=7]
resource_name = "blue_secondary"
length = 0.75
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 109, 110, 111, 112, 113, 114, 115, 116 ]
}

[sub_resource type="Animation" id=8]
resource_name = "blue_to_orange"
length = 3.3
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 1.9, 2, 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 2.8, 2.9, 3, 3.1, 3.2 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32 ]
}

[sub_resource type="Animation" id=9]
loop = true

[sub_resource type="Animation" id=10]
resource_name = "idle_blue"
length = 0.63
loop = true
step = 0.12
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.12, 0.24, 0.36, 0.48, 0.6 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 117, 118, 119, 120, 121, 118 ]
}

[sub_resource type="Animation" id=11]
resource_name = "idle_orange"
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 33 ]
}

[sub_resource type="Animation" id=12]
resource_name = "idle_purple"
length = 0.1
step = 0.12
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 68 ]
}

[sub_resource type="Animation" id=13]
resource_name = "orange_attack"
length = 0.1
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 41 ]
}

[sub_resource type="Animation" id=14]
resource_name = "orange_attack_begin"
step = 0.12
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.12, 0.24, 0.36, 0.48, 0.6, 0.72, 0.84 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 33, 34, 35, 36, 37, 38, 39, 40 ]
}

[sub_resource type="Animation" id=15]
resource_name = "orange_attack_end"
length = 0.6
step = 0.12
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.12, 0.24, 0.36, 0.48 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 41, 42, 43, 44, 45 ]
}

[sub_resource type="Animation" id=16]
resource_name = "orange_to_purple"
length = 2.2
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 1.9, 2, 2.1 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67 ]
}

[sub_resource type="Animation" id=17]
resource_name = "purple_attack_begin"
length = 1.36
step = 0.12
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.12, 0.24, 0.36, 0.48, 0.6, 0.72, 0.84, 0.96, 1.08, 1.2, 1.32 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79 ]
}

[sub_resource type="Animation" id=18]
resource_name = "purple_attack_end"
length = 1.15
step = 0.12
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.12, 0.24, 0.36, 0.48, 0.6, 0.72, 0.84, 0.96, 1.08 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 80, 81, 82, 73, 72, 71, 70, 69, 68, 67 ]
}

[sub_resource type="Animation" id=19]
resource_name = "purple_attack_loop"
length = 0.28
loop = true
step = 0.12
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.12, 0.24 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 1,
"values": [ 80, 78, 79 ]
}

[sub_resource type="Animation" id=20]
resource_name = "purple_to_blue"
length = 2.5
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 1.9, 2, 2.1, 2.2, 2.3, 2.4 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107 ]
}

[sub_resource type="AnimationNodeAnimation" id=21]
animation = "blue_primary_begin"

[sub_resource type="AnimationNodeAnimation" id=22]
animation = "blue_primary_end"

[sub_resource type="AnimationNodeAnimation" id=23]
animation = "blue_primary_loop"

[sub_resource type="AnimationNodeAnimation" id=24]
animation = "blue_secondary"

[sub_resource type="AnimationNodeAnimation" id=25]
animation = "blue_to_orange"

[sub_resource type="AnimationNodeAnimation" id=26]
animation = "idle_blue"

[sub_resource type="AnimationNodeAnimation" id=27]
animation = "idle_orange"

[sub_resource type="AnimationNodeAnimation" id=28]
animation = "idle_purple"

[sub_resource type="AnimationNodeAnimation" id=29]
animation = "orange_attack"

[sub_resource type="AnimationNodeAnimation" id=30]
animation = "orange_attack_begin"

[sub_resource type="AnimationNodeAnimation" id=31]
animation = "orange_attack_end"

[sub_resource type="AnimationNodeAnimation" id=32]
animation = "orange_to_purple"

[sub_resource type="AnimationNodeAnimation" id=33]
animation = "purple_attack_begin"

[sub_resource type="AnimationNodeAnimation" id=34]
animation = "purple_attack_end"

[sub_resource type="AnimationNodeAnimation" id=35]
animation = "purple_attack_loop"

[sub_resource type="AnimationNodeAnimation" id=36]
animation = "purple_to_blue"

[sub_resource type="AnimationNodeStateMachineTransition" id=37]

[sub_resource type="AnimationNodeStateMachineTransition" id=38]

[sub_resource type="AnimationNodeStateMachineTransition" id=39]
switch_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id=40]
switch_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id=41]

[sub_resource type="AnimationNodeStateMachineTransition" id=42]
switch_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id=43]
switch_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id=44]
switch_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id=45]

[sub_resource type="AnimationNodeStateMachineTransition" id=46]
switch_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id=47]

[sub_resource type="AnimationNodeStateMachineTransition" id=48]
switch_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id=49]

[sub_resource type="AnimationNodeStateMachineTransition" id=50]
switch_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id=51]
switch_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id=52]
switch_mode = 2
auto_advance = true

[sub_resource type="AnimationNodeStateMachineTransition" id=53]

[sub_resource type="AnimationNodeStateMachineTransition" id=54]
switch_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id=55]

[sub_resource type="AnimationNodeStateMachineTransition" id=56]
switch_mode = 2
auto_advance = true

[sub_resource type="AnimationNodeStateMachine" id=57]
states/blue_primary_begin/node = SubResource( 21 )
states/blue_primary_begin/position = Vector2( 2130.25, 75 )
states/blue_primary_end/node = SubResource( 22 )
states/blue_primary_end/position = Vector2( 1949.25, 151.377 )
states/blue_primary_loop/node = SubResource( 23 )
states/blue_primary_loop/position = Vector2( 2321.25, 151.377 )
states/blue_secondary/node = SubResource( 24 )
states/blue_secondary/position = Vector2( 1759, -36.4988 )
states/blue_to_orange/node = SubResource( 25 )
states/blue_to_orange/position = Vector2( 1147, -27 )
states/idle_blue/node = SubResource( 26 )
states/idle_blue/position = Vector2( 1759, 75 )
states/idle_orange/node = SubResource( 27 )
states/idle_orange/position = Vector2( 150.429, 75 )
states/idle_purple/node = SubResource( 28 )
states/idle_purple/position = Vector2( 914, 75 )
states/orange_attack/node = SubResource( 29 )
states/orange_attack/position = Vector2( 150.429, 301.08 )
states/orange_attack_begin/node = SubResource( 30 )
states/orange_attack_begin/position = Vector2( -47.571, 186 )
states/orange_attack_end/node = SubResource( 31 )
states/orange_attack_end/position = Vector2( 356.429, 186 )
states/orange_to_purple/node = SubResource( 32 )
states/orange_to_purple/position = Vector2( 502.072, 75 )
states/purple_attack_begin/node = SubResource( 33 )
states/purple_attack_begin/position = Vector2( 672.656, 186 )
states/purple_attack_end/node = SubResource( 34 )
states/purple_attack_end/position = Vector2( 1152.66, 186 )
states/purple_attack_loop/node = SubResource( 35 )
states/purple_attack_loop/position = Vector2( 914, 281.229 )
states/purple_to_blue/node = SubResource( 36 )
states/purple_to_blue/position = Vector2( 1384.3, 75 )
transitions = [ "idle_orange", "orange_attack_begin", SubResource( 37 ), "orange_attack", "orange_attack_end", SubResource( 38 ), "orange_attack_begin", "orange_attack", SubResource( 39 ), "orange_attack_end", "idle_orange", SubResource( 40 ), "idle_orange", "orange_to_purple", SubResource( 41 ), "orange_to_purple", "idle_purple", SubResource( 42 ), "purple_attack_begin", "purple_attack_loop", SubResource( 43 ), "purple_attack_loop", "purple_attack_end", SubResource( 44 ), "idle_purple", "purple_attack_begin", SubResource( 45 ), "purple_attack_end", "idle_purple", SubResource( 46 ), "idle_purple", "purple_to_blue", SubResource( 47 ), "purple_to_blue", "idle_blue", SubResource( 48 ), "idle_blue", "blue_primary_begin", SubResource( 49 ), "blue_primary_begin", "blue_primary_loop", SubResource( 50 ), "blue_primary_loop", "blue_primary_end", SubResource( 51 ), "blue_primary_end", "idle_blue", SubResource( 52 ), "idle_blue", "blue_to_orange", SubResource( 53 ), "blue_to_orange", "idle_orange", SubResource( 54 ), "idle_blue", "blue_secondary", SubResource( 55 ), "blue_secondary", "idle_blue", SubResource( 56 ) ]
start_node = "idle_orange"
graph_offset = Vector2( -425.313, 67.3422 )

[sub_resource type="AnimationNodeStateMachinePlayback" id=58]

[sub_resource type="CircleShape2D" id=59]
radius = 424.075

[node name="Boss" type="KinematicBody2D"]
collision_layer = 0
collision_mask = 0
script = ExtResource( 3 )

[node name="DroneStateMachine" type="Node" parent="."]
script = ExtResource( 2 )

[node name="ColorState" type="Node" parent="."]
script = ExtResource( 1 )

[node name="Sprite" type="Sprite" parent="."]
scale = Vector2( 0.4, 0.4 )
texture = ExtResource( 4 )
vframes = 12
hframes = 12
frame = 107

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource( 60 )

[node name="DetectionArea" type="Area2D" parent="."]
visible = false
collision_layer = 7
collision_mask = 7

[node name="CollisionShape2D" type="CollisionShape2D" parent="DetectionArea"]
shape = SubResource( 2 )

[node name="DetectionRay" type="RayCast2D" parent="."]
enabled = true
collision_mask = 7

[node name="Timers" type="Node" parent="."]

[node name="OrangeMain" type="Timer" parent="Timers"]

[node name="DestructionArea" type="Area2D" parent="."]
collision_layer = 2
collision_mask = 2147483650

[node name="CollisionShape2D" type="CollisionShape2D" parent="DestructionArea"]
shape = SubResource( 61 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
anims/blue_primary_begin = SubResource( 4 )
anims/blue_primary_end = SubResource( 5 )
anims/blue_primary_loop = SubResource( 6 )
anims/blue_secondary = SubResource( 7 )
anims/blue_to_orange = SubResource( 8 )
anims/idle = SubResource( 9 )
anims/idle_blue = SubResource( 10 )
anims/idle_orange = SubResource( 11 )
anims/idle_purple = SubResource( 12 )
anims/orange_attack = SubResource( 13 )
anims/orange_attack_begin = SubResource( 14 )
anims/orange_attack_end = SubResource( 15 )
anims/orange_to_purple = SubResource( 16 )
anims/purple_attack_begin = SubResource( 17 )
anims/purple_attack_end = SubResource( 18 )
anims/purple_attack_loop = SubResource( 19 )
anims/purple_to_blue = SubResource( 20 )

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource( 57 )
anim_player = NodePath("../AnimationPlayer")
active = true
parameters/playback = SubResource( 58 )

[node name="OrangeRange" type="Area2D" parent="."]
collision_layer = 7
collision_mask = 7

[node name="CollisionShape2D2" type="CollisionShape2D" parent="OrangeRange"]
shape = SubResource( 59 )
[connection signal="body_entered" from="DestructionArea" to="DroneStateMachine" method="_on_DestructionArea_body_entered"]
[connection signal="body_entered" from="OrangeRange" to="DroneStateMachine" method="_on_OrangeRange_body_entered"]
[connection signal="body_exited" from="OrangeRange" to="DroneStateMachine" method="_on_OrangeRange_body_exited"]
